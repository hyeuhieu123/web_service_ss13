ğŸ” Quy trÃ¬nh xÃ¡c thá»±c JWT giá»¯a Client vÃ  Server
ğŸ¯ TÃ³m táº¯t 2 giai Ä‘oáº¡n:
Client Ä‘Äƒng nháº­p â†’ nháº­n JWT tá»« Server

Client gá»­i JWT á»Ÿ cÃ¡c request sau â†’ Server kiá»ƒm tra vÃ  xÃ¡c thá»±c

ğŸ” Chi tiáº¿t tá»«ng bÆ°á»›c (Flow):
ğŸ¬ 1. Login - Client gá»­i thÃ´ng tin Ä‘Äƒng nháº­p
css
Copy
Edit
POST /login
Body: { username, password }
ğŸ“Œ Client nháº­p thÃ´ng tin Ä‘á»ƒ xÃ¡c thá»±c ban Ä‘áº§u

ğŸ§  2. Server xÃ¡c thá»±c thÃ´ng tin
Kiá»ƒm tra username/password vá»›i DB

Náº¿u Ä‘Ãºng â†’ táº¡o JWT (chá»©a user id, role, thá»i gian háº¿t háº¡nâ€¦)

java
Copy
Edit
Payload = {
  "sub": "userId123",
  "role": "USER",
  "exp": 1690003600
}
ğŸ“Œ Server táº¡o token Ä‘áº¡i diá»‡n danh tÃ­nh ngÆ°á»i dÃ¹ng

ğŸ 3. Server tráº£ JWT vá» cho Client
json
Copy
Edit
{
  "token": "xxxxx.yyyyy.zzzzz"
}
ğŸ“Œ Client nháº­n JWT â†’ thÆ°á»ng lÆ°u vÃ o localStorage, sessionStorage hoáº·c HttpOnly cookie

ğŸ“¡ 4. Client gá»­i JWT kÃ¨m má»—i request sau
sql
Copy
Edit
GET /profile
Headers: Authorization: Bearer xxxxx.yyyyy.zzzzz
ğŸ“Œ Client tá»± Ä‘á»™ng Ä‘Ã­nh kÃ¨m token vÃ o má»—i request Ä‘á»ƒ chá»©ng minh danh tÃ­nh

ğŸ” 5. Server xÃ¡c thá»±c token (verify JWT)
Server sáº½:

TÃ¡ch 3 pháº§n token: Header, Payload, Signature

DÃ¹ng secret key Ä‘á»ƒ verify chá»¯ kÃ½ (Signature)

Kiá»ƒm tra exp (háº¿t háº¡n chÆ°a), sub, role, v.v.

ğŸ“Œ Náº¿u há»£p lá»‡ â‡’ cho phÃ©p truy cáº­p
âŒ Náº¿u token sai / háº¿t háº¡n â‡’ 401 Unauthorized

âœ… 6. Server xá»­ lÃ½ logic vÃ  pháº£n há»“i
css
Copy
Edit
HTTP/1.1 200 OK
Body: { profile info... }



ğŸ§© Giáº£i thÃ­ch vai trÃ² tá»«ng bÆ°á»›c
BÆ°á»›c	Vai trÃ²
1. Login	Gá»­i thÃ´ng tin xÃ¡c thá»±c Ä‘á»ƒ báº¯t Ä‘áº§u phiÃªn
2. Verify login	Server kiá»ƒm tra há»£p lá»‡ Ä‘á»ƒ sinh token
3. PhÃ¡t hÃ nh JWT	Cáº¥p phÃ©p ngÆ°á»i dÃ¹ng vá»›i má»™t token
4. Gá»­i JWT	XÃ¡c minh danh tÃ­nh á»Ÿ má»—i request
5. XÃ¡c thá»±c JWT	Báº£o Ä‘áº£m token cÃ²n háº¡n, khÃ´ng giáº£ máº¡o
6. Tráº£ dá»¯ liá»‡u	Gá»­i vá» thÃ´ng tin yÃªu cáº§u náº¿u Ä‘Ãºng